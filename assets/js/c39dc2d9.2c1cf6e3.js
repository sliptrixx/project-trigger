"use strict";(self.webpackChunkproject_trigger=self.webpackChunkproject_trigger||[]).push([[378],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>f});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=o.createContext({}),u=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=u(e.components);return o.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=u(n),h=a,f=p["".concat(s,".").concat(h)]||p[h]||d[h]||r;return n?o.createElement(f,i(i({ref:t},c),{},{components:n})):o.createElement(f,i({ref:t},c))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=h;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:a,i[1]=l;for(var u=2;u<r;u++)i[u]=n[u];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}h.displayName="MDXCreateElement"},5162:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(7294),a=n(6010);const r="tabItem_Ymn6";function i(e){let{children:t,hidden:n,className:i}=e;return o.createElement("div",{role:"tabpanel",className:(0,a.Z)(r,i),hidden:n},t)}},4866:(e,t,n)=>{n.d(t,{Z:()=>S});var o=n(7462),a=n(7294),r=n(6010),i=n(2466),l=n(6550),s=n(1980),u=n(7392),c=n(12);function p(e){return function(e){return a.Children.map(e,(e=>{if((0,a.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))}(e).map((e=>{let{props:{value:t,label:n,attributes:o,default:a}}=e;return{value:t,label:n,attributes:o,default:a}}))}function d(e){const{values:t,children:n}=e;return(0,a.useMemo)((()=>{const e=t??p(n);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function h(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function f(e){let{queryString:t=!1,groupId:n}=e;const o=(0,l.k6)(),r=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,s._X)(r),(0,a.useCallback)((e=>{if(!r)return;const t=new URLSearchParams(o.location.search);t.set(r,e),o.replace({...o.location,search:t.toString()})}),[r,o])]}function m(e){const{defaultValue:t,queryString:n=!1,groupId:o}=e,r=d(e),[i,l]=(0,a.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!h({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const o=n.find((e=>e.default))??n[0];if(!o)throw new Error("Unexpected error: 0 tabValues");return o.value}({defaultValue:t,tabValues:r}))),[s,u]=f({queryString:n,groupId:o}),[p,m]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[o,r]=(0,c.Nk)(n);return[o,(0,a.useCallback)((e=>{n&&r.set(e)}),[n,r])]}({groupId:o}),y=(()=>{const e=s??p;return h({value:e,tabValues:r})?e:null})();(0,a.useLayoutEffect)((()=>{y&&l(y)}),[y]);return{selectedValue:i,selectValue:(0,a.useCallback)((e=>{if(!h({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);l(e),u(e),m(e)}),[u,m,r]),tabValues:r}}var y=n(2389);const g="tabList__CuJ",b="tabItem_LNqP";function v(e){let{className:t,block:n,selectedValue:l,selectValue:s,tabValues:u}=e;const c=[],{blockElementScrollPositionUntilNextRender:p}=(0,i.o5)(),d=e=>{const t=e.currentTarget,n=c.indexOf(t),o=u[n].value;o!==l&&(p(t),s(o))},h=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const n=c.indexOf(e.currentTarget)+1;t=c[n]??c[0];break}case"ArrowLeft":{const n=c.indexOf(e.currentTarget)-1;t=c[n]??c[c.length-1];break}}t?.focus()};return a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":n},t)},u.map((e=>{let{value:t,label:n,attributes:i}=e;return a.createElement("li",(0,o.Z)({role:"tab",tabIndex:l===t?0:-1,"aria-selected":l===t,key:t,ref:e=>c.push(e),onKeyDown:h,onClick:d},i,{className:(0,r.Z)("tabs__item",b,i?.className,{"tabs__item--active":l===t})}),n??t)})))}function w(e){let{lazy:t,children:n,selectedValue:o}=e;if(n=Array.isArray(n)?n:[n],t){const e=n.find((e=>e.props.value===o));return e?(0,a.cloneElement)(e,{className:"margin-top--md"}):null}return a.createElement("div",{className:"margin-top--md"},n.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==o}))))}function k(e){const t=m(e);return a.createElement("div",{className:(0,r.Z)("tabs-container",g)},a.createElement(v,(0,o.Z)({},e,t)),a.createElement(w,(0,o.Z)({},e,t)))}function S(e){const t=(0,y.Z)();return a.createElement(k,(0,o.Z)({key:String(t)},e))}},7054:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>l,metadata:()=>u,toc:()=>p});var o=n(7462),a=(n(7294),n(3905)),r=n(4866),i=n(5162);const l={sidebar_position:9},s="Tutorial: Audio",u={unversionedId:"Basic Tutorials/audio",id:"Basic Tutorials/audio",title:"Tutorial: Audio",description:"In this tutorial, we will be adding audio to our game to make it more immersive. We will start simply by adding two sound effects to our game: one for when a blaster shoots and one for when an enemy is destroyed. We will go over two different implementations and you can choose which one you prefer.",source:"@site/docs/Basic Tutorials/9_audio.md",sourceDirName:"Basic Tutorials",slug:"/Basic Tutorials/audio",permalink:"/project-trigger/docs/Basic Tutorials/audio",draft:!1,tags:[],version:"current",sidebarPosition:9,frontMatter:{sidebar_position:9},sidebar:"tutorialSidebar",previous:{title:"Tutorial: HUD",permalink:"/project-trigger/docs/Basic Tutorials/hud"}},c={},p=[{value:"Blaster Shoot",id:"blaster-shoot",level:2},{value:"Explosion on Destroy",id:"explosion-on-destroy",level:2},{value:"Final Scripts",id:"final-scripts",level:2}],d={toc:p};function h(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"tutorial-audio"},"Tutorial: Audio"),(0,a.kt)("p",null,"In this tutorial, we will be adding audio to our game to make it more immersive. We will start simply by adding two sound effects to our game: one for when a blaster shoots and one for when an enemy is destroyed. We will go over two different implementations and you can choose which one you prefer."),(0,a.kt)("h2",{id:"blaster-shoot"},"Blaster Shoot"),(0,a.kt)("p",null,'Whenever the player or the enemy shoots, we want to play a sound effect. So, we will go to the "Player" gameobject which has a blaster, and add an ',(0,a.kt)("inlineCode",{parentName:"p"},"AudioSource")," component to it. An audio source is a component in Unity that is used to play audio clips."),(0,a.kt)("p",null,"To play an audio clip, we need to drag and drop a sound clip from the project window into the ",(0,a.kt)("inlineCode",{parentName:"p"},"AudioClip")," field in the ",(0,a.kt)("inlineCode",{parentName:"p"},"AudioSource")," component. I have added a bunch of sound effects to the starter project, so you can use any of those. For this tutorial, I will be using the ",(0,a.kt)("inlineCode",{parentName:"p"},"laserSmall_000.ogg")," sound effect."),(0,a.kt)("p",null,"Also, we want to make sure that the sound doesn't automatically play when the game starts. In Unity, this option is turned on by default, so we need to uncheck the ",(0,a.kt)("inlineCode",{parentName:"p"},"Play On Awake")," option in the ",(0,a.kt)("inlineCode",{parentName:"p"},"AudioSource")," component."),(0,a.kt)("p",null,"Now, we need to modify our ",(0,a.kt)("inlineCode",{parentName:"p"},"Blaster")," script to play the sound effect from the ",(0,a.kt)("inlineCode",{parentName:"p"},"AudioSource")," when it shoots a projectile. Let's get the reference to the ",(0,a.kt)("inlineCode",{parentName:"p"},"AudioSource")," component in the ",(0,a.kt)("inlineCode",{parentName:"p"},"Start")," method:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-csharp"},'[Tooltip("The audio source that can play the projectile fire audio")]\nprotected AudioSource audioSource = null;\n\nvoid Start()\n{\n    audioSource = GetComponent<AudioSource>();\n}\n')),(0,a.kt)("p",null,"Now, we can play the sound effect in the ",(0,a.kt)("inlineCode",{parentName:"p"},"Shoot")," method by calling the ",(0,a.kt)("inlineCode",{parentName:"p"},"Play")," method on the ",(0,a.kt)("inlineCode",{parentName:"p"},"AudioSource")," component."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-csharp"},"public void Shoot()\n{\n    // ... code to spawn a projectile\n\n    // play the projectile-fired sound effect\n    if(audioSource) \n    {\n        audioSource.Play();\n    }\n}\n")),(0,a.kt)("p",null,"Test it out by playing the game and shooting the blaster. You should hear a sound effect when the player shoots. We can expand it to the enemy blaster by adding an ",(0,a.kt)("inlineCode",{parentName:"p"},"AudioSource"),' component to the "Enemy" prefabs and it should automatically work the same way.'),(0,a.kt)("h2",{id:"explosion-on-destroy"},"Explosion on Destroy"),(0,a.kt)("p",null,"We have a sound effect for when the blaster shoots by directly accessing the ",(0,a.kt)("inlineCode",{parentName:"p"},"AudioSource")," component. However, as we expand on our game, we will find it quite tedious to add an ",(0,a.kt)("inlineCode",{parentName:"p"},"AudioSource")," component to every gameobject that needs to play a sound effect. Wouldn't it be nice if we could just specify the sound effect and the position of the sound effect in the world and have the sound play automatically? This is where our custom ",(0,a.kt)("inlineCode",{parentName:"p"},"AudioManager")," comes in."),(0,a.kt)("p",null,"Let's start by adding a new script to our ",(0,a.kt)("strong",{parentName:"p"},'"GameManager"')," object called ",(0,a.kt)("inlineCode",{parentName:"p"},"AudioManger"),". It'll have a public function that anyone can invoke to play an explosion sound effect at a given position. So, we need to add a serialized property describing the explosion sound effect and a method to play the sound effect at a given position."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-csharp"},'[Tooltip("A reference to the explosion sound effect")]\n[SerializeField] AudioClip ExplosionSound;\n\npublic void PlayExplosion(Vector3 position)\n{\n    AudioSource.PlayClipAtPoint(ExplosionSound, position);\n}\n')),(0,a.kt)("p",null,"We can now specify the explosion sound effect in the inspector and call the ",(0,a.kt)("inlineCode",{parentName:"p"},"PlayExplosion")," function from anywhere in our game. I'm going to use the ",(0,a.kt)("inlineCode",{parentName:"p"},"explosionCrunch_000.ogg")," sound effect for this tutorial. Next, we need to modify our ",(0,a.kt)("inlineCode",{parentName:"p"},"Health")," script to play the explosion sound effect when the hp reaches 0."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-csharp"},"// ... code to check if hp is 0\nif(hp <= 0)\n{\n    // play the explosion sound effect\n    var audioManager = FindObjectOfType<AudioManager>();\n    audioManager?.PlayExplosion(transform.position);\n\n    // ... code to destroy the gameobject\n}\n")),(0,a.kt)("p",null,"Test it out by playing the game and shooting the enemy. You should hear a sound effect when the enemy is destroyed. This is a simple implementation of the ",(0,a.kt)("inlineCode",{parentName:"p"},"AudioManager")," that can be expanded to play other sound effects as well."),(0,a.kt)("p",null,"Each of the two methods has its own pros and cons. The first method gives the developer more control over the sound effects, but it can be tedious to add an ",(0,a.kt)("inlineCode",{parentName:"p"},"AudioSource")," component to every gameobject that needs to play a sound effect and configure the properties. The second method is more convenient, but it is less flexible and doesn't give the developer as much control over the sound effects. The most control you get is the position of the sound effect and the volume of the sound effect. So, it's up to you to decide which method you prefer."),(0,a.kt)("h2",{id:"final-scripts"},"Final Scripts"),(0,a.kt)("p",null,"Here are the final scripts for this tutorial for reference:"),(0,a.kt)(r.Z,{mdxType:"Tabs"},(0,a.kt)(i.Z,{value:"AudioManager",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-csharp"},'using System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\npublic class AudioManager : MonoBehaviour\n{\n    [Tooltip("A reference to the explosion sound effect")]\n    [SerializeField] AudioClip ExplosionSound;\n\n    // Play an explosion sound effect at the given point\n    public void PlayExplosion(Vector3 position)\n    {\n        AudioSource.PlayClipAtPoint(ExplosionSound, position);\n    }   \n}\n'))),(0,a.kt)(i.Z,{value:"Blaster",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-csharp"},'using System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\npublic class Blaster : MonoBehaviour\n{\n    [Tooltip("Additional offset from the source transform from where the projectile is spawned")]\n    [SerializeField] protected Vector2 Offset;\n\n    [Tooltip("A reference to the projectile prefab that will be used to instantiate projectiles")]\n    [SerializeField] protected GameObject ProjectilePrefab;\n\n    [Tooltip("The audio source that can play the projectile fire audio")]\n    protected AudioSource audioSource = null;\n\n    void Start()\n    {\n        audioSource = GetComponent<AudioSource>();\n    }\n\n    // Shoot a projectile from the blaster position\n    public void Shoot()\n    {\n        // apply an offset along the direction in which the blaster is looking,\n        // then spawn a projectile from that position with the current rotation of the blaster\n        var pos = transform.position + Offset.x * transform.right + Offset.y * transform.up;\n        Instantiate(ProjectilePrefab, pos, transform.rotation);\n\n        // play the projectile fire audio\n        if(audioSource)\n        {\n            audioSource.Play();\n        }\n    }\n}\n'))),(0,a.kt)(i.Z,{value:"Health",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-csharp"},"using System.Collections;\nusing System.Collections.Generic;\nusing System.Runtime.InteropServices.WindowsRuntime;\nusing UnityEngine;\n\npublic class Health : MonoBehaviour\n{\n    [SerializeField] protected int hp = 1;\n\n    // Apply damage to the object\n    public void ApplyDamage(int damage)\n    {\n        hp -= damage;\n\n        // if the health drops below zero destroy the object\n        if (hp <= 0)\n        {\n            // play the explosion sound effect before destroying the object\n            var audioManager = FindObjectOfType<AudioManager>();\n            audioManager?.PlayExplosion(transform.position);\n\n            // destroy the object\n            Destroy(gameObject);\n        }\n    }\n\n    // Apply heals to the object\n    public void ApplyHeals(int heals)\n    {\n        // basically reverse the damage\n        ApplyDamage(-heals);\n    }\n\n    // Get the health from the health component\n    public int GetHP() \n    {\n        return hp;\n    }\n}\n")))))}h.isMDXComponent=!0}}]);