"use strict";(self.webpackChunkproject_trigger=self.webpackChunkproject_trigger||[]).push([[843],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),h=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=h(e.components);return a.createElement(s.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=h(n),d=r,m=u["".concat(s,".").concat(d)]||u[d]||p[d]||o;return n?a.createElement(m,l(l({ref:t},c),{},{components:n})):a.createElement(m,l({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[u]="string"==typeof e?e:r,l[1]=i;for(var h=2;h<o;h++)l[h]=n[h];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5162:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(7294),r=n(6010);const o="tabItem_Ymn6";function l(e){let{children:t,hidden:n,className:l}=e;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(o,l),hidden:n},t)}},4866:(e,t,n)=>{n.d(t,{Z:()=>I});var a=n(7462),r=n(7294),o=n(6010),l=n(2466),i=n(6550),s=n(1980),h=n(7392),c=n(12);function u(e){return function(e){return r.Children.map(e,(e=>{if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))}(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:r}}=e;return{value:t,label:n,attributes:a,default:r}}))}function p(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??u(n);return function(e){const t=(0,h.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function d(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function m(e){let{queryString:t=!1,groupId:n}=e;const a=(0,i.k6)(),o=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,s._X)(o),(0,r.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(a.location.search);t.set(o,e),a.replace({...a.location,search:t.toString()})}),[o,a])]}function g(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,o=p(e),[l,i]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!d({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:o}))),[s,h]=m({queryString:n,groupId:a}),[u,g]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,o]=(0,c.Nk)(n);return[a,(0,r.useCallback)((e=>{n&&o.set(e)}),[n,o])]}({groupId:a}),f=(()=>{const e=s??u;return d({value:e,tabValues:o})?e:null})();(0,r.useLayoutEffect)((()=>{f&&i(f)}),[f]);return{selectedValue:l,selectValue:(0,r.useCallback)((e=>{if(!d({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);i(e),h(e),g(e)}),[h,g,o]),tabValues:o}}var f=n(2389);const w="tabList__CuJ",v="tabItem_LNqP";function y(e){let{className:t,block:n,selectedValue:i,selectValue:s,tabValues:h}=e;const c=[],{blockElementScrollPositionUntilNextRender:u}=(0,l.o5)(),p=e=>{const t=e.currentTarget,n=c.indexOf(t),a=h[n].value;a!==i&&(u(t),s(a))},d=e=>{let t=null;switch(e.key){case"Enter":p(e);break;case"ArrowRight":{const n=c.indexOf(e.currentTarget)+1;t=c[n]??c[0];break}case"ArrowLeft":{const n=c.indexOf(e.currentTarget)-1;t=c[n]??c[c.length-1];break}}t?.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":n},t)},h.map((e=>{let{value:t,label:n,attributes:l}=e;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:i===t?0:-1,"aria-selected":i===t,key:t,ref:e=>c.push(e),onKeyDown:d,onClick:p},l,{className:(0,o.Z)("tabs__item",v,l?.className,{"tabs__item--active":i===t})}),n??t)})))}function b(e){let{lazy:t,children:n,selectedValue:a}=e;if(n=Array.isArray(n)?n:[n],t){const e=n.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},n.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function k(e){const t=g(e);return r.createElement("div",{className:(0,o.Z)("tabs-container",w)},r.createElement(y,(0,a.Z)({},e,t)),r.createElement(b,(0,a.Z)({},e,t)))}function I(e){const t=(0,f.Z)();return r.createElement(k,(0,a.Z)({key:String(t)},e))}},342:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>d,frontMatter:()=>i,metadata:()=>h,toc:()=>u});var a=n(7462),r=(n(7294),n(3905)),o=n(4866),l=n(5162);const i={sidebar_position:8},s="Tutorial: HUD",h={unversionedId:"Basic Tutorials/hud",id:"Basic Tutorials/hud",title:"Tutorial: HUD",description:"One of the most important aspects of a game is the UI. In this tutorial, we will create a simple HUD that displays the player's health and the current stage they are on. Later, we will also add game over and stage complete screens.",source:"@site/docs/Basic Tutorials/8_hud.md",sourceDirName:"Basic Tutorials",slug:"/Basic Tutorials/hud",permalink:"/project-trigger/docs/Basic Tutorials/hud",draft:!1,tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_position:8},sidebar:"tutorialSidebar",previous:{title:"Tutorial: Stages",permalink:"/project-trigger/docs/Basic Tutorials/stages"},next:{title:"Tutorial: Audio",permalink:"/project-trigger/docs/Basic Tutorials/audio"}},c={},u=[{value:"HUD",id:"hud",level:2},{value:"Create a canvas",id:"create-a-canvas",level:3},{value:"Create a health UI",id:"create-a-health-ui",level:3},{value:"UIManager.cs",id:"uimanagercs",level:3},{value:"Update health UI",id:"update-health-ui",level:3},{value:"Create a stage UI",id:"create-a-stage-ui",level:3},{value:"Game Over and Restart",id:"game-over-and-restart",level:2},{value:"Create a game over UI",id:"create-a-game-over-ui",level:3},{value:"Create a restart button",id:"create-a-restart-button",level:3},{value:"Create stages completed UI",id:"create-stages-completed-ui",level:3},{value:"Final Scripts",id:"final-scripts",level:2},{value:"Final Thoughts",id:"final-thoughts",level:2}],p={toc:u};function d(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"tutorial-hud"},"Tutorial: HUD"),(0,r.kt)("p",null,"One of the most important aspects of a game is the UI. In this tutorial, we will create a simple HUD that displays the player's health and the current stage they are on. Later, we will also add game over and stage complete screens."),(0,r.kt)("h2",{id:"hud"},"HUD"),(0,r.kt)("p",null,"The HUD is a UI element that is always visible to the player and is used to show important information about the current state of the game. A good example of a HUD is a health bar or a score counter found in many arcade games. "),(0,r.kt)("h3",{id:"create-a-canvas"},"Create a canvas"),(0,r.kt)("p",null,"In Unity, a canvas is a type of GameObject that is used to host and display UI elements. To create a canvas, select ",(0,r.kt)("inlineCode",{parentName:"p"},"UI > Canvas")," in the hierarchy window. This will create a canvas GameObject in the scene."),(0,r.kt)("p",null,"The canvas has a lot of different settings that can be configured. The ",(0,r.kt)("strong",{parentName:"p"},"Canvas Scaler")," component is used to control the overall scale and pixel density of UI elements in the canvas. The default is set to ",(0,r.kt)("em",{parentName:"p"},"Constant Pixel Size"),", which means that the UI elements will not be scaled when the resolution changes. This might be what you are looking for, however, my preference is to use the ",(0,r.kt)("em",{parentName:"p"},"Scale with Screen Size")," option which will keep the UI elements the same size regardless of the resolution."),(0,r.kt)("p",null,"The canvas itself has a ",(0,r.kt)("strong",{parentName:"p"},"Render Mode")," setting that determines how the canvas is rendered. The default is ",(0,r.kt)("em",{parentName:"p"},"Screen Space - Overlay"),", which means that canvas will always be rendered on top of the scene. This is what we want for our HUD. However, if you want to render a UI element in 3D space, you can use the ",(0,r.kt)("em",{parentName:"p"},"Screen Space - Camera")," to give it some depth, or if you want to create a more diegetic UI, you may try the ",(0,r.kt)("em",{parentName:"p"},"World Space")," options. Experiment with them to see what they do."),(0,r.kt)("h3",{id:"create-a-health-ui"},"Create a health UI"),(0,r.kt)("p",null,"The first UI element we will add to the canvas is a simple health text. To do this, right-click on the canvas and select ",(0,r.kt)("inlineCode",{parentName:"p"},"UI > Text - TextMeshPro"),' to create a new text element. In the inspector, change the text input to "Health: 0" and mess around with the font size, color, and style to your liking. '),(0,r.kt)("p",null,"Drag the game view and rescale it and you'll notice that the text is always centered in the middle of the screen. This is because this is Unity's default anchoring mode. However, we can change how a UI element is anchored relative to the parent UI element. To do this, click the box-like icon in the top left corner of the ",(0,r.kt)("inlineCode",{parentName:"p"},"Rect Transform")," component. This will open the anchoring window."),(0,r.kt)("p",null,"I'll select the bottom left option and set the position to my liking. Now, when I resize the game view, the text will always be anchored to the bottom left corner of the screen."),(0,r.kt)("h3",{id:"uimanagercs"},"UIManager.cs"),(0,r.kt)("p",null,"Now that we have a health UI element, we need to update it whenever the player's health changes. To do this, we will create a new script called ",(0,r.kt)("inlineCode",{parentName:"p"},"UIManager.cs")," and attach it to our ",(0,r.kt)("inlineCode",{parentName:"p"},"Game Manager")," GameObject. This script will be responsible for interacting with the UI elements and updating them when necessary."),(0,r.kt)("p",null,"To update the text of a UI element programmatically, we need to access the TextMeshPro text component and modify the text property. We will first create a serialized field to get the reference to the text component."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},'using TMPro;\n\npublic class UIManager : MonoBehaviour\n{\n    [SerializeField] TMP_Text HealthUI;\n\n    void Start()\n    {\n        HealthUI.text = "Some random text";\n    }\n}\n')),(0,r.kt)("p",null,"Drag and drop the text element into the ",(0,r.kt)("inlineCode",{parentName:"p"},"HealthUI"),' field in the inspector. Now, when you run the game, you should see the text change to "Some random text".'),(0,r.kt)("h3",{id:"update-health-ui"},"Update health UI"),(0,r.kt)("p",null,"Now, we need to update the text to show what the player's health is. I am going to take a lazy approach and just update the text every frame. A better approach would be for the ",(0,r.kt)("inlineCode",{parentName:"p"},"Health")," component to fire an event whenever the hp value changes and the ",(0,r.kt)("inlineCode",{parentName:"p"},"UIManager")," subscribes to that event. But, for now, this will do."),(0,r.kt)("p",null,"I also added a public getter in the ",(0,r.kt)("inlineCode",{parentName:"p"},"Health")," component to get the current hp value. This is so that other scripts can access the hp value without having the option to modify it."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},'public Health HealthToTrack;\n\nvoid Update()\n{\n    HealthUI.text = $"Health: {HealthToTrack.GetHP()}";\n}\n')),(0,r.kt)("p",null,"Now, when you run the game, you should see the health UI update to the player's current health. Except, there's a small issue when the player dies and the ",(0,r.kt)("inlineCode",{parentName:"p"},"Health")," component that we are tracking gets destroyed. "),(0,r.kt)("p",null,"So, what's the solution? There are a few ways to solve this problem. One way would be for the health to be tracked reporting to the UI manager when it gets destroyed. This would have worked great if we were using events, but since we are not, we will have to use a different approach."),(0,r.kt)("p",null,"The other way would be to check if the health component we are working with is currently valid or not. In Unity, when a component reference is cast to a boolean, it will return true if the component is valid and false if it is not. So we can use this to check if the health component is valid or not."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},'var hp = HealthToTrack ? HealthToTrack.GetHP() : 0;\nHealthUI.text = $"Health: {hp}";\n')),(0,r.kt)("p",null,"Now, when you run the game, you should see the health UI update to 0 when the player dies!"),(0,r.kt)("p",null,"Lastly, I want to mention one other thing about ",(0,r.kt)("inlineCode",{parentName:"p"},"Unity.Object")," references. When you assign a reference to it and later the reference gets destroyed, the value of this variable is not null and it won't be set to null. The casting to a boolean will return false if the reference is destroyed."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},"// assign null\nHealth HealthToTrack = null;\nif(HealthToTrack == null) { } // True\nif(HealthToTrack) // False\n\n// assign a new reference\nHealthToTrack = new Health();\nif(HealthToTrack == null) { } // False\nif(HealthToTrack) // True\n\n// destroy the reference\nDestroy(HealthToTrack);\nif(HealthToTrack == null) { } // False\nif(HealthToTrack) // False\n")),(0,r.kt)("h3",{id:"create-a-stage-ui"},"Create a stage UI"),(0,r.kt)("p",null,"Just like the health UI, we will create a stage UI element and update it whenever the player enters a new stage. But let's add some spice to it. I want to make the stage UI element only appear on the screen for a few seconds and then disappear."),(0,r.kt)("p",null,"To do this, we will have a float variable that keeps track of how long the stage UI element has been on screen and we will make it disappear after the time has passed."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},'[Tooltip("The UI text that displays the current stage the player is playing")]\n[SerializeField] TMP_Text StageUI;\n\n// time to show the stage UI\nfloat stageUITimer = 0;\n\n// public API to request the UI manager to show the stage UI\npublic void RequestStageUI(int stagenumber, float duration)\n{\n    StageUI.text = $"Stage {stagenumber}";\n    StageUI.gameObject.SetActive(true);\n    stageUITimer = duration;\n}\n\nvoid Update()\n{\n    // tick down the time\n    stageUITimer -= Time.deltaTime;\n\n    // once the time has elapsed and the stage UI is still active, hide it\n    if(stageUITimer <= 0 && StageUI.gameObject.activeSelf)\n    {\n        StageUI.gameObject.SetActive(false);\n    }\n}\n')),(0,r.kt)("p",null,"Now, from the stage manager, we can request the UI manager to show the stage UI whenever the player enters a new stage. Once we are done requesting a load of the stage, we request the UI manager to show the stage UI for 3 seconds."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},"if(enemiesLeft == 0)\n{\n    // load the next stage code here...\n\n    // request the UI manager to show the stage UI\n    var uiManager = GetComponent<UIManager>();\n    if(currentSceneID <= stages.Count) \n    {\n        uiManager.RequestStageUI(currentSceneID, 3.0f);\n    }\n}\n")),(0,r.kt)("p",null,"Now, when you run the game, you should see the stage UI appear for 3 seconds whenever the player enters a new stage."),(0,r.kt)("h2",{id:"game-over-and-restart"},"Game Over and Restart"),(0,r.kt)("h3",{id:"create-a-game-over-ui"},"Create a game over UI"),(0,r.kt)("p",null,"The next UI element we will add is a game-over UI element that gets displayed when the player dies. This UI element will have a button that will restart the game when clicked."),(0,r.kt)("p",null,'First, let\'s create a new panel UI element that will host the game over text as well as the restart button. First, add the text element and set the text to "Game Over". Then, add a button element by right-clicking on the panel object and selecting ',(0,r.kt)("inlineCode",{parentName:"p"},"UI > Button - TextMeshPro"),'. It will create a button with a text element inside it as a child. Set the text of the button to "Restart".'),(0,r.kt)("p",null,"First, let's create a public function in the ",(0,r.kt)("inlineCode",{parentName:"p"},"UIManager")," script that will display the game over the UI element when the game determines that the player has lost. Currently, the player has lost the game when the player's health reaches 0. However, you can expand the conditions later on to include other things like the player running out of time or the destruction of the player's objective to protect."),(0,r.kt)("p",null,"The UI element that we will be turning on/off is the entire panel object that contains the game over text and the restart button. So, we will need to get the reference to the panel gameobject itself."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},'[Tooltip("The game over UI element that appears when the player dies")]\n[SerializeField] GameObject GameOverScreen;\n\n// Open the game over Menu\npublic void OpenGameOverMenu()\n{\n    GameOverScreen.SetActive(true);\n}\n')),(0,r.kt)("p",null,"Now, the last thing we need to do is hook it up to the player when the player dies. When the player's health goes to 0, the gameobject gets destroyed. So, we can call the ",(0,r.kt)("inlineCode",{parentName:"p"},"OpenGameOverMenu")," function when the ",(0,r.kt)("inlineCode",{parentName:"p"},"PlayerControls")," component gets destroyed."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},"// In the PlayerControls.cs script\nvoid OnDestroy()\n{\n    // request the UI manager to open the game over the menu\n    var uiManager = FindObjectOfType<UIManager>();\n    uiManager?.OpenGameOverMenu();\n}\n")),(0,r.kt)("p",null,"Now, when you run the game, you should see the game over UI element appear when the player dies."),(0,r.kt)("h3",{id:"create-a-restart-button"},"Create a restart button"),(0,r.kt)("p",null,"The next UI element we will need to implement is the restart button. The restart button should reload the current scene when clicked. To do this we will SceneManager's ",(0,r.kt)("inlineCode",{parentName:"p"},"LoadScene")," function and we will do this in the ",(0,r.kt)("inlineCode",{parentName:"p"},"StageManager")," script."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},'// In the StageManager.cs script\npublic void Restart()\n{\n    SceneManager.LoadScene("CoreGameplay");\n}\n')),(0,r.kt)("p",null,"Now, we just need to hook up the restart button to the restart function. To do this, select the restart button object from the hierarchy, and in the inspector, navigate to the bottom of the button component. There should be a section called ",(0,r.kt)("inlineCode",{parentName:"p"},"On Click()"),". Click on the ",(0,r.kt)("strong",{parentName:"p"},"+")," button to add a new event. Drag and drop the ",(0,r.kt)("strong",{parentName:"p"},"Game Manager")," object into the object field and select the ",(0,r.kt)("inlineCode",{parentName:"p"},"StageManager > Restart")," function."),(0,r.kt)("p",null,'Let\'s quickly test the functionality out. We should notice that as soon as the player dies, the game over UI element appears and the restart button is clickable. And when we click the restart button, the game should reload the "core gameplay" scene.'),(0,r.kt)("h3",{id:"create-stages-completed-ui"},"Create stages completed UI"),(0,r.kt)("p",null,'The last UI element to create is the stage completed UI element. It\'s pretty much the same as the game over UI element, but instead of displaying "Game Over", it will display "Stages Completed". I\'ll just duplicate the game over UI element and rename it to "Stages Completed" and modify the text to my liking. Then, I\'ll set up the functionality to trigger it in the ',(0,r.kt)("inlineCode",{parentName:"p"},"UIManager")," script."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},'[Tooltip("The game complete UI element that appears when the player completes all stages")]\n[SerializeField] GameObject GameCompleteScreen;\n\n// Open the game complete menu\npublic void OpenGameCompleteMenu()\n{\n    GameCompleteScreen.SetActive(true);\n}\n')),(0,r.kt)("p",null,"Now, we just need to hook it up to the stage manager. When the stage manager has run out of stages to load, we will request the UI Manager to open the game complete menu."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},"// In the StageManager.cs script update loop\nvar uiManager = GetComponent<UIManager>();\nif(currentSceneID <= scenes.count) \n{\n    uiManager?.RequestStageUI(currentSceneID, 3.0f);\n}\nelse \n{\n    uiManager?.OpenGameCompleteMenu();\n}\n")),(0,r.kt)("p",null,'Let\'s test it out. When you run the game and beat all 3 stages, the new "stages completed" UI element should appear. And when the restart button is pressed, the game should reload the "core gameplay" scene, just like the game over UI element.'),(0,r.kt)("h2",{id:"final-scripts"},"Final Scripts"),(0,r.kt)("p",null,"For reference, here is the final script for the project."),(0,r.kt)(o.Z,{mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"UIManager.cs",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},'using System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing TMPro;\n\npublic class UIManager : MonoBehaviour\n{\n    [Tooltip("The health component to track")]\n    public Health HealthToTrack;\n\n    [Header("UI Elements")]\n    [Tooltip("The UI text that displays the health element being tracked")]\n    [SerializeField] TMP_Text HealthUI;\n\n    [Tooltip("The UI text that displays the current stage the player is playing")]\n    [SerializeField] TMP_Text StageUI;\n\n    [Tooltip("The game over UI element that appears when the player dies")]\n    [SerializeField] GameObject GameOverScreen;\n\n    [Tooltip("The game complete UI element that appears when the player completes all stages")]\n    [SerializeField] GameObject GameCompleteScreen;\n\n    // time to show the stage UI\n    float stageUITimer = 0;\n\n    void Update()\n    {\n        // we can definitely improve the efficiency using the OnHealthChange event,\n        // however, I\'m going to keep it pretty simple\n\n        // every tick we update the health UI.\n        var hp = HealthToTrack ? HealthToTrack.GetHP() : 0;\n        HealthUI.text = $"Health: {hp}";\n\n        // tick down the stage UI timer\n        stageUITimer -= Time.deltaTime;\n\n        // once the stage timer has elapsed and the stage UI is visible,\n        // set the UI inactive\n        if(stageUITimer <= 0 && StageUI.gameObject.activeSelf)\n        {\n            StageUI.gameObject.SetActive(false);\n        }\n    }\n\n    // Request the UI manager to show the stage number as UI for the requested time\n    public void RequestStageUI(int stagenumber, float time)\n    {\n        StageUI.text = $"Stage {stagenumber}";\n        StageUI.gameObject.SetActive(true);\n        stageUITimer = time;\n    }\n\n    // Open the game over Menu\n    public void OpenGameOverMenu()\n    {\n        GameOverScreen.SetActive(true);\n    }\n\n    // Open the game complete menu\n    public void OpenGameCompleteMenu()\n    {\n        GameCompleteScreen.SetActive(true);\n    }\n}\n'))),(0,r.kt)(l.Z,{value:"StageManager.cs",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},'using System.Collections;\nusing System.Collections.Generic;\nusing UnityEditor;\nusing UnityEngine;\nusing UnityEngine.SceneManagement;\n\n// Script responsible for adding new enemies from the next stage to the current scene once player has\n// cleared all enemies in the current stage\npublic class StageManager : MonoBehaviour\n{\n    [SerializeField] List<string> scenes;\n\n    int currentSceneID = 0;\n    int enemiesLeft = 0;\n\n    void Start()\n    {\n        enemiesLeft = FindObjectsOfType<EnemyAI>().Length;\n    }\n\n    void Update()\n    {\n        // if there are no enemies left on the scene and there are scenes left to load,\n        // then we load the next enemy level\n        if(enemiesLeft == 0)\n        {\n            enemiesLeft = -1;\n            if(currentSceneID < scenes.Count)\n            {\n                LoadEnemyScene(scenes[currentSceneID]);\n            }\n            currentSceneID++;\n\n            // Request the UI manager to show the stage text UI\n            var uiManager = GetComponent<UIManager>();\n            if (currentSceneID <= scenes.Count)\n            {\n                uiManager?.RequestStageUI(currentSceneID, 3.0f);\n            }\n            else\n            {\n                uiManager?.OpenGameCompleteMenu();\n            }\n        }\n    }\n\n    void LoadEnemyScene(string scenename)\n    {\n        var asyncLoad = SceneManager.LoadSceneAsync(scenename, LoadSceneMode.Additive);\n        asyncLoad.completed += (AsyncOperation op) => \n        {\n            enemiesLeft = FindObjectsOfType<EnemyAI>().Length;\n        };\n    }\n\n    // Report to the stage manager that an enemy was killed\n    public void ReportEnemyDeath()\n    {\n        enemiesLeft--;\n    }\n\n    // Restart the game\n    public void Restart()\n    {\n        SceneManager.LoadScene("CoreGameplay");\n    }\n}\n'))),(0,r.kt)(l.Z,{value:"PlayerControls.cs",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},'using System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\n\npublic class PlayerControls : MonoBehaviour\n{\n    [Tooltip("The speed at which the player ship moves")]\n    public float Speed = 3;\n\n    private Blaster blaster;\n\n    private void Start()\n    {\n        blaster = GetComponent<Blaster>();\n    }\n\n    void Update()\n    {\n        if(Input.GetKey(KeyCode.D) || Input.GetKey(KeyCode.RightArrow))\n        {\n            transform.position += Vector3.right * Speed * Time.deltaTime;\n        }\n\n        if(Input.GetKey(KeyCode.A) || Input.GetKey(KeyCode.LeftArrow))\n        {\n            transform.position -= Vector3.right * Speed * Time.deltaTime;\n        }\n\n        if(Input.GetMouseButtonDown(0))\n        {\n            blaster.Shoot();\n        }\n    }\n\n    private void OnDestroy()\n    {\n        var uiManager = FindObjectOfType<UIManager>();\n        uiManager?.OpenGameOverMenu();\n    }\n}\n')))),(0,r.kt)("h2",{id:"final-thoughts"},"Final Thoughts"),(0,r.kt)("p",null,"Firstly, a note I want to make is my use of the ",(0,r.kt)("inlineCode",{parentName:"p"},"FindObjectOfType")," function without caching throughout the project. This function is not recommended to be used as it tends to be slow on large projects. However, for this project, I am using it sparingly and it should be fine. A better pattern to use would be the singleton pattern. It's slightly more complicated to implement, so, I am not going to cover it in this tutorial. But feel free to look it up if you are interested."),(0,r.kt)("p",null,'Another thing that I don\'t like about this project right now is the way I am requesting the game to load the "CoreGameplay" scene whenever we want to restart the game. What if we renamed the scene to something else? We would have to come back to the script and rename the value. Or what if we wanted to add a completely different game mode in a new scene and want to restart that scene? This method is not ideal and we can do better. We can use the scene that is currently hosting the stage manager and reload that one to restart the game. I will leave that as an exercise for you to do.'))}d.isMDXComponent=!0}}]);